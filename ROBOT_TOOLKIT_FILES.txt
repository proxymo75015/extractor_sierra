================================================================================
                   ROBOT POSITION EXTRACTION TOOLKIT
                           Files Created
================================================================================

ğŸ“¦ PROJECT STRUCTURE
--------------------
/workspaces/extractor_sierra/
â”‚
â”œâ”€â”€ ğŸ“š DOCUMENTATION (4 files, ~25KB)
â”‚   â”œâ”€â”€ README_ROBOT_POSITIONS.md              6.8 KB  [Quick Start Guide]
â”‚   â”œâ”€â”€ ROBOT_POSITION_EXTRACTION_GUIDE.md     4.4 KB  [4 Methods Guide]
â”‚   â”œâ”€â”€ ROBOT_POSITION_INVESTIGATION_SUMMARY.md 7.0 KB  [Technical Report]
â”‚   â”œâ”€â”€ FILE_INDEX.md                          7.4 KB  [File Catalog]
â”‚   â””â”€â”€ ROBOT_POSITIONS_SUMMARY.txt            4.4 KB  [Executive Summary]
â”‚
â”œâ”€â”€ ğŸ”§ EXTRACTION SCRIPTS (3 files, ~8KB)
â”‚   â”œâ”€â”€ scummvm_robot_patch.diff               549 B   [ScummVM Patch]
â”‚   â”œâ”€â”€ extract_robot_positions.sh             4.2 KB  [Auto Extraction]
â”‚   â””â”€â”€ parse_robot_logs.py                    3.7 KB  [Log Parser]
â”‚
â”œâ”€â”€ ğŸ’» CODE EXAMPLES (1 file, ~6KB)
â”‚   â””â”€â”€ robot_position_loader_example.cpp      5.8 KB  [C++ Integration]
â”‚
â”œâ”€â”€ ğŸ§ª TEST FILES (3 files, ~1KB)
â”‚   â”œâ”€â”€ test_scummvm_log.txt                   708 B   [Sample Log]
â”‚   â”œâ”€â”€ test_robot_positions.txt               161 B   [Sample Output]
â”‚   â””â”€â”€ robot_positions.txt                    385 B   [Config Placeholder]
â”‚
â””â”€â”€ ğŸ”¬ RESEARCH ARCHIVE (1 file, ~27KB)
    â””â”€â”€ src/sci_robot_positions.cpp            Built   [SCI Script Parser]
    â””â”€â”€ sci_robot_positions (binary)           27 KB   [Compiled Parser]

================================================================================

ğŸ“ FILE DESCRIPTIONS
--------------------

â”Œâ”€ DOCUMENTATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚ README_ROBOT_POSITIONS.md                                                  â”‚
â”‚   â¤ Quick start guide for Robot position extraction                       â”‚
â”‚   â¤ Recommended method: ScummVM patching                                  â”‚
â”‚   â¤ 3 alternative methods                                                 â”‚
â”‚   â¤ Integration guide, troubleshooting, checklist                         â”‚
â”‚                                                                            â”‚
â”‚ ROBOT_POSITION_EXTRACTION_GUIDE.md                                        â”‚
â”‚   â¤ Detailed guide with 4 extraction methods                              â”‚
â”‚   â¤ Method 1: ScummVM patched (automatic)                                 â”‚
â”‚   â¤ Method 2: HEAP analysis (advanced)                                    â”‚
â”‚   â¤ Method 3: Manual extraction (simple)                                  â”‚
â”‚   â¤ Method 4: Default values (quick)                                      â”‚
â”‚                                                                            â”‚
â”‚ ROBOT_POSITION_INVESTIGATION_SUMMARY.md                                   â”‚
â”‚   â¤ Complete technical investigation report                               â”‚
â”‚   â¤ SCI2.1 architecture analysis                                          â”‚
â”‚   â¤ ScummVM kRobotOpen function documentation                             â”‚
â”‚   â¤ RBT header decoding results                                           â”‚
â”‚   â¤ Why coordinates are NOT in RBT files                                  â”‚
â”‚                                                                            â”‚
â”‚ FILE_INDEX.md                                                              â”‚
â”‚   â¤ Comprehensive catalog of all created files                            â”‚
â”‚   â¤ Descriptions, usage, workflow diagrams                                â”‚
â”‚   â¤ Quick reference guide                                                 â”‚
â”‚                                                                            â”‚
â”‚ ROBOT_POSITIONS_SUMMARY.txt                                               â”‚
â”‚   â¤ Executive summary in plain text                                       â”‚
â”‚   â¤ Key findings, commands, specifications                                â”‚
â”‚   â¤ Quick reference for terminal viewing                                  â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ EXTRACTION SCRIPTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚ scummvm_robot_patch.diff                                                   â”‚
â”‚   â¤ Unified diff patch for ScummVM                                        â”‚
â”‚   â¤ Adds warning() logging to kRobotOpen function                         â”‚
â”‚   â¤ Location: engines/sci/engine/kvideo.cpp                               â”‚
â”‚   â¤ Usage: patch -p1 < scummvm_robot_patch.diff                           â”‚
â”‚                                                                            â”‚
â”‚ extract_robot_positions.sh                                                 â”‚
â”‚   â¤ Fully automated extraction script                                     â”‚
â”‚   â¤ Clones ScummVM, applies patch, compiles                               â”‚
â”‚   â¤ Launches game and captures logs                                       â”‚
â”‚   â¤ Parses logs and generates robot_positions.txt                         â”‚
â”‚   â¤ Usage: ./extract_robot_positions.sh                                   â”‚
â”‚                                                                            â”‚
â”‚ parse_robot_logs.py                                                        â”‚
â”‚   â¤ Python 3 script to parse ScummVM debug logs                           â”‚
â”‚   â¤ Extracts Robot coordinates from ROBOT_DEBUG lines                     â”‚
â”‚   â¤ Consolidates multiple occurrences                                     â”‚
â”‚   â¤ Outputs robot_positions.txt (format: id X Y)                          â”‚
â”‚   â¤ Usage: python3 parse_robot_logs.py input.txt output.txt               â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ CODE EXAMPLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚ robot_position_loader_example.cpp                                          â”‚
â”‚   â¤ Complete C++ implementation example                                   â”‚
â”‚   â¤ RobotPositionManager class                                            â”‚
â”‚   â¤ Load robot_positions.txt file                                         â”‚
â”‚   â¤ Get positions with fallback to centered defaults                      â”‚
â”‚   â¤ Integration examples for main() and extractRobotVideo()               â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ TEST FILES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚ test_scummvm_log.txt                                                       â”‚
â”‚   â¤ Sample ScummVM log with ROBOT_DEBUG output                            â”‚
â”‚   â¤ Contains 3 Robot positions (1000, 230, 91)                            â”‚
â”‚   â¤ Used to test parse_robot_logs.py without running ScummVM              â”‚
â”‚                                                                            â”‚
â”‚ test_robot_positions.txt                                                   â”‚
â”‚   â¤ Sample output from parse_robot_logs.py                                â”‚
â”‚   â¤ Correct format example                                                â”‚
â”‚   â¤ Shows expected parser output                                          â”‚
â”‚                                                                            â”‚
â”‚ robot_positions.txt                                                        â”‚
â”‚   â¤ Placeholder configuration file                                        â”‚
â”‚   â¤ To be filled with real coordinates                                    â”‚
â”‚   â¤ Format: robot_id X Y (one per line)                                   â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ RESEARCH ARCHIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                            â”‚
â”‚ src/sci_robot_positions.cpp                                                â”‚
â”‚   â¤ SCI script bytecode parser                                            â”‚
â”‚   â¤ Searches for kRobotOpen calls with hardcoded coordinates              â”‚
â”‚   â¤ Result: Found 0 (coordinates are dynamic)                             â”‚
â”‚   â¤ Proved coordinates stored as object properties in HEAP                â”‚
â”‚   â¤ Based on ScummVM script.cpp and kernel_tables.h                       â”‚
â”‚                                                                            â”‚
â”‚ sci_robot_positions (binary)                                               â”‚
â”‚   â¤ Compiled version of the parser                                        â”‚
â”‚   â¤ Scans RESMAP/RESSCI files                                             â”‚
â”‚   â¤ Decompresses scripts with LZS                                         â”‚
â”‚   â¤ Execution result: "Aucun appel kRobot trouvÃ© dans les scripts"        â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================

ğŸš€ QUICK START
--------------
1. Read:  README_ROBOT_POSITIONS.md
2. Run:   ./extract_robot_positions.sh
3. Get:   robot_positions.txt with real coordinates
4. Use:   robot_position_loader_example.cpp for integration

ğŸ“– DETAILED WORKFLOW
--------------------
Phase 1: Extract Positions
  scummvm_robot_patch.diff
          â†“
    Patch ScummVM
          â†“
    Compile & Run
          â†“
   Capture Logs
          â†“
  parse_robot_logs.py
          â†“
  robot_positions.txt

Phase 2: Integration
  robot_positions.txt
          â†“
  robot_position_loader_example.cpp
          â†“
  Modify src/main.cpp
          â†“
  Extract with exact positioning

ğŸ¯ TARGET OUTPUT
----------------
robot_positions.txt:
  # Format: robot_id X Y
  1000 150 143
  230 180 160
  91 175 150

ğŸ“Š KEY FINDINGS
---------------
âœ“ Coordinates NOT in RBT files (xResolution=0, yResolution=0)
âœ“ Passed via kRobotOpen(robotId, plane, priority, X, Y, scale)
âœ“ argv[3] = X coordinate, argv[4] = Y coordinate
âœ“ Stored as object properties in HEAP (SCI scripts)
âœ“ ScummVM source: engines/sci/engine/kvideo.cpp:266-276

ğŸ”— RESOURCES
------------
ScummVM:      https://github.com/scummvm/scummvm
SCI Wiki:     https://wiki.scummvm.org/index.php/SCI
kRobotOpen:   engines/sci/engine/kvideo.cpp:266

================================================================================
Created: 2024
Project: extractor_sierra
Purpose: Extract exact Robot video positions from Phantasmagoria
================================================================================
